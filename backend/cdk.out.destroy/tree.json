{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.212.0"},"children":{"AssistantBackendStack":{"id":"AssistantBackendStack","path":"AssistantBackendStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.212.0"},"children":{"Vpc":{"id":"Vpc","path":"AssistantBackendStack/Vpc","constructInfo":{"fqn":"constructs.Construct","version":"10.2.69"},"children":{"VPC":{"id":"VPC","path":"AssistantBackendStack/Vpc/VPC","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/Vpc/VPC/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"AssistantBackendStack/Vpc/VPC"}]}}},"publicSubnet1":{"id":"publicSubnet1","path":"AssistantBackendStack/Vpc/VPC/publicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.212.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"AssistantBackendStack/Vpc/VPC/publicSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1a","cidrBlock":"10.0.0.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"AssistantBackendStack/Vpc/VPC/publicSubnet1"}],"vpcId":{"Ref":"VpcVPC8B8C4E4B"}}}},"Acl":{"id":"Acl","path":"AssistantBackendStack/Vpc/VPC/publicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"AssistantBackendStack/Vpc/VPC/publicSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"AssistantBackendStack/Vpc/VPC/publicSubnet1"}],"vpcId":{"Ref":"VpcVPC8B8C4E4B"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"AssistantBackendStack/Vpc/VPC/publicSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VpcVPCpublicSubnet1RouteTableA07850BA"},"subnetId":{"Ref":"VpcVPCpublicSubnet1SubnetA91B7DBE"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"AssistantBackendStack/Vpc/VPC/publicSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"VpcVPCIGWAC9DFBD8"},"routeTableId":{"Ref":"VpcVPCpublicSubnet1RouteTableA07850BA"}}}},"EIP":{"id":"EIP","path":"AssistantBackendStack/Vpc/VPC/publicSubnet1/EIP","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"AssistantBackendStack/Vpc/VPC/publicSubnet1"}]}}},"NATGateway":{"id":"NATGateway","path":"AssistantBackendStack/Vpc/VPC/publicSubnet1/NATGateway","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["VpcVPCpublicSubnet1EIP15896A4D","AllocationId"]},"subnetId":{"Ref":"VpcVPCpublicSubnet1SubnetA91B7DBE"},"tags":[{"key":"Name","value":"AssistantBackendStack/Vpc/VPC/publicSubnet1"}]}}}}},"publicSubnet2":{"id":"publicSubnet2","path":"AssistantBackendStack/Vpc/VPC/publicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.212.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"AssistantBackendStack/Vpc/VPC/publicSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1b","cidrBlock":"10.0.64.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"AssistantBackendStack/Vpc/VPC/publicSubnet2"}],"vpcId":{"Ref":"VpcVPC8B8C4E4B"}}}},"Acl":{"id":"Acl","path":"AssistantBackendStack/Vpc/VPC/publicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"AssistantBackendStack/Vpc/VPC/publicSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"AssistantBackendStack/Vpc/VPC/publicSubnet2"}],"vpcId":{"Ref":"VpcVPC8B8C4E4B"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"AssistantBackendStack/Vpc/VPC/publicSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VpcVPCpublicSubnet2RouteTable50B9E3ED"},"subnetId":{"Ref":"VpcVPCpublicSubnet2SubnetC9D5B981"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"AssistantBackendStack/Vpc/VPC/publicSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"VpcVPCIGWAC9DFBD8"},"routeTableId":{"Ref":"VpcVPCpublicSubnet2RouteTable50B9E3ED"}}}}}},"privateSubnet1":{"id":"privateSubnet1","path":"AssistantBackendStack/Vpc/VPC/privateSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.212.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"AssistantBackendStack/Vpc/VPC/privateSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1a","cidrBlock":"10.0.128.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"AssistantBackendStack/Vpc/VPC/privateSubnet1"}],"vpcId":{"Ref":"VpcVPC8B8C4E4B"}}}},"Acl":{"id":"Acl","path":"AssistantBackendStack/Vpc/VPC/privateSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"AssistantBackendStack/Vpc/VPC/privateSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"AssistantBackendStack/Vpc/VPC/privateSubnet1"}],"vpcId":{"Ref":"VpcVPC8B8C4E4B"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"AssistantBackendStack/Vpc/VPC/privateSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VpcVPCprivateSubnet1RouteTableBD57150E"},"subnetId":{"Ref":"VpcVPCprivateSubnet1Subnet29B9FADC"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"AssistantBackendStack/Vpc/VPC/privateSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"VpcVPCpublicSubnet1NATGatewayC3853FCB"},"routeTableId":{"Ref":"VpcVPCprivateSubnet1RouteTableBD57150E"}}}}}},"privateSubnet2":{"id":"privateSubnet2","path":"AssistantBackendStack/Vpc/VPC/privateSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.212.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"AssistantBackendStack/Vpc/VPC/privateSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1b","cidrBlock":"10.0.192.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"AssistantBackendStack/Vpc/VPC/privateSubnet2"}],"vpcId":{"Ref":"VpcVPC8B8C4E4B"}}}},"Acl":{"id":"Acl","path":"AssistantBackendStack/Vpc/VPC/privateSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"AssistantBackendStack/Vpc/VPC/privateSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"AssistantBackendStack/Vpc/VPC/privateSubnet2"}],"vpcId":{"Ref":"VpcVPC8B8C4E4B"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"AssistantBackendStack/Vpc/VPC/privateSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VpcVPCprivateSubnet2RouteTable364CB60F"},"subnetId":{"Ref":"VpcVPCprivateSubnet2Subnet63498DC1"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"AssistantBackendStack/Vpc/VPC/privateSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"VpcVPCpublicSubnet1NATGatewayC3853FCB"},"routeTableId":{"Ref":"VpcVPCprivateSubnet2RouteTable364CB60F"}}}}}},"IGW":{"id":"IGW","path":"AssistantBackendStack/Vpc/VPC/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"AssistantBackendStack/Vpc/VPC"}]}}},"VPCGW":{"id":"VPCGW","path":"AssistantBackendStack/Vpc/VPC/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"VpcVPCIGWAC9DFBD8"},"vpcId":{"Ref":"VpcVPC8B8C4E4B"}}}},"RestrictDefaultSecurityGroupCustomResource":{"id":"RestrictDefaultSecurityGroupCustomResource","path":"AssistantBackendStack/Vpc/VPC/RestrictDefaultSecurityGroupCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.212.0","metadata":[]},"children":{"Default":{"id":"Default","path":"AssistantBackendStack/Vpc/VPC/RestrictDefaultSecurityGroupCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.212.0"}}}},"S3GatewayEndpoint":{"id":"S3GatewayEndpoint","path":"AssistantBackendStack/Vpc/VPC/S3GatewayEndpoint","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.GatewayVpcEndpoint","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/Vpc/VPC/S3GatewayEndpoint/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"AssistantBackendStack/Vpc/VPC"}],"routeTableIds":[{"Ref":"VpcVPCprivateSubnet1RouteTableBD57150E"},{"Ref":"VpcVPCprivateSubnet2RouteTable364CB60F"},{"Ref":"VpcVPCpublicSubnet1RouteTableA07850BA"},{"Ref":"VpcVPCpublicSubnet2RouteTable50B9E3ED"}],"serviceName":{"Fn::Join":["",["com.amazonaws.",{"Ref":"AWS::Region"},".s3"]]},"vpcEndpointType":"Gateway","vpcId":{"Ref":"VpcVPC8B8C4E4B"}}}}}},"DynamoDBEndpoint":{"id":"DynamoDBEndpoint","path":"AssistantBackendStack/Vpc/VPC/DynamoDBEndpoint","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.GatewayVpcEndpoint","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/Vpc/VPC/DynamoDBEndpoint/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"AssistantBackendStack/Vpc/VPC"}],"routeTableIds":[{"Ref":"VpcVPCprivateSubnet1RouteTableBD57150E"},{"Ref":"VpcVPCprivateSubnet2RouteTable364CB60F"},{"Ref":"VpcVPCpublicSubnet1RouteTableA07850BA"},{"Ref":"VpcVPCpublicSubnet2RouteTable50B9E3ED"}],"serviceName":{"Fn::Join":["",["com.amazonaws.",{"Ref":"AWS::Region"},".dynamodb"]]},"vpcEndpointType":"Gateway","vpcId":{"Ref":"VpcVPC8B8C4E4B"}}}}}},"BedrockEndpoint":{"id":"BedrockEndpoint","path":"AssistantBackendStack/Vpc/VPC/BedrockEndpoint","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.InterfaceVpcEndpoint","version":"2.212.0","metadata":[]},"children":{"SecurityGroup":{"id":"SecurityGroup","path":"AssistantBackendStack/Vpc/VPC/BedrockEndpoint/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/Vpc/VPC/BedrockEndpoint/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"AssistantBackendStack/Vpc/VPC/BedrockEndpoint/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"cidrIp":{"Fn::GetAtt":["VpcVPC8B8C4E4B","CidrBlock"]},"ipProtocol":"tcp","fromPort":443,"toPort":443,"description":{"Fn::Join":["",["from ",{"Fn::GetAtt":["VpcVPC8B8C4E4B","CidrBlock"]},":443"]]}}],"tags":[{"key":"Name","value":"AssistantBackendStack/Vpc/VPC"}],"vpcId":{"Ref":"VpcVPC8B8C4E4B"}}}}}},"Resource":{"id":"Resource","path":"AssistantBackendStack/Vpc/VPC/BedrockEndpoint/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"AssistantBackendStack/Vpc/VPC"}],"privateDnsEnabled":true,"securityGroupIds":[{"Fn::GetAtt":["VpcVPCBedrockEndpointSecurityGroup051D7BC3","GroupId"]}],"serviceName":"com.amazonaws.us-east-1.bedrock-runtime","subnetIds":[{"Ref":"VpcVPCprivateSubnet1Subnet29B9FADC"},{"Ref":"VpcVPCprivateSubnet2Subnet63498DC1"}],"vpcEndpointType":"Interface","vpcId":{"Ref":"VpcVPC8B8C4E4B"}}}}}}}}}},"Custom::VpcRestrictDefaultSGCustomResourceProvider":{"id":"Custom::VpcRestrictDefaultSGCustomResourceProvider","path":"AssistantBackendStack/Custom::VpcRestrictDefaultSGCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.212.0"},"children":{"Staging":{"id":"Staging","path":"AssistantBackendStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.212.0"}},"Role":{"id":"Role","path":"AssistantBackendStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.212.0"}},"Handler":{"id":"Handler","path":"AssistantBackendStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.212.0"}}}},"ssmBedrockRegionParameter":{"id":"ssmBedrockRegionParameter","path":"AssistantBackendStack/ssmBedrockRegionParameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/ssmBedrockRegionParameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/AgenticLLMAssistant/bedrock_region","type":"String","value":"us-west-2"}}}}},"ssmLLMModelIDParameter":{"id":"ssmLLMModelIDParameter","path":"AssistantBackendStack/ssmLLMModelIDParameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/ssmLLMModelIDParameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/AgenticLLMAssistant/llm_model_id","type":"String","value":"anthropic.claude-v2"}}}}},"AgentDB":{"id":"AgentDB","path":"AssistantBackendStack/AgentDB","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseInstance","version":"2.212.0","metadata":[]},"children":{"SubnetGroup":{"id":"SubnetGroup","path":"AssistantBackendStack/AgentDB/SubnetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.SubnetGroup","version":"2.212.0","metadata":[]},"children":{"Default":{"id":"Default","path":"AssistantBackendStack/AgentDB/SubnetGroup/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBSubnetGroup","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBSubnetGroup","aws:cdk:cloudformation:props":{"dbSubnetGroupDescription":"Subnet group for AgentDB database","subnetIds":[{"Ref":"VpcVPCprivateSubnet1Subnet29B9FADC"},{"Ref":"VpcVPCprivateSubnet2Subnet63498DC1"}]}}}}},"SecurityGroup":{"id":"SecurityGroup","path":"AssistantBackendStack/AgentDB/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/AgentDB/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for AgentDB database","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"VpcVPC8B8C4E4B"}}}},"from AssistantBackendStackProcessingSecurityGroup6D26CD12:5432":{"id":"from AssistantBackendStackProcessingSecurityGroup6D26CD12:5432","path":"AssistantBackendStack/AgentDB/SecurityGroup/from AssistantBackendStackProcessingSecurityGroup6D26CD12:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow inbound traffic from SageMaker to RDS","fromPort":5432,"groupId":{"Fn::GetAtt":["AgentDBSecurityGroupB03CC0F7","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["ProcessingSecurityGroup5BDF13BE","GroupId"]},"toPort":5432}}},"from AssistantBackendStackLambdaAgentContainerSecurityGroupAF60224D:5432":{"id":"from AssistantBackendStackLambdaAgentContainerSecurityGroupAF60224D:5432","path":"AssistantBackendStack/AgentDB/SecurityGroup/from AssistantBackendStackLambdaAgentContainerSecurityGroupAF60224D:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Lambda to connect to RDS","fromPort":5432,"groupId":{"Fn::GetAtt":["AgentDBSecurityGroupB03CC0F7","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["LambdaAgentContainerSecurityGroup4509E773","GroupId"]},"toPort":5432}}}}},"Secret":{"id":"Secret","path":"AssistantBackendStack/AgentDB/Secret","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseSecret","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/AgentDB/Secret/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":{"Fn::Join":["",["Generated by the CDK for stack: ",{"Ref":"AWS::StackName"}]]},"generateSecretString":{"passwordLength":30,"secretStringTemplate":"{\"username\":\"AgentDBAdmin\"}","generateStringKey":"password","excludeCharacters":" %+~`#$&*()|[]{}:;<>?!'/@\"\\"}}}},"Attachment":{"id":"Attachment","path":"AssistantBackendStack/AgentDB/Secret/Attachment","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.SecretTargetAttachment","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/AgentDB/Secret/Attachment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecretTargetAttachment","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::SecretTargetAttachment","aws:cdk:cloudformation:props":{"secretId":{"Ref":"AssistantBackendStackAgentDBSecretD25161943fdaad7efa858a3daf9490cf0a702aeb"},"targetId":{"Ref":"AgentDBD4C116E7"},"targetType":"AWS::RDS::DBInstance"}}}}}}},"Resource":{"id":"Resource","path":"AssistantBackendStack/AgentDB/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBInstance","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBInstance","aws:cdk:cloudformation:props":{"allocatedStorage":"20","backupRetentionPeriod":1,"copyTagsToSnapshot":true,"dbInstanceClass":"db.t3.micro","dbName":"AgentSQLDBandVectorStore","dbSubnetGroupName":{"Ref":"AgentDBSubnetGroup1480BD4E"},"deleteAutomatedBackups":true,"engine":"postgres","engineVersion":"15.8","masterUsername":"AgentDBAdmin","masterUserPassword":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"AssistantBackendStackAgentDBSecretD25161943fdaad7efa858a3daf9490cf0a702aeb"},":SecretString:password::}}"]]},"publiclyAccessible":false,"storageType":"gp2","vpcSecurityGroups":[{"Fn::GetAtt":["AgentDBSecurityGroupB03CC0F7","GroupId"]}]}}}}},"ProcessingSecurityGroup":{"id":"ProcessingSecurityGroup","path":"AssistantBackendStack/ProcessingSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/ProcessingSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"AssistantBackendStack/ProcessingSecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"VpcVPC8B8C4E4B"}}}},"from AssistantBackendStackAgentDBSecurityGroup622615F0:5432":{"id":"from AssistantBackendStackAgentDBSecurityGroup622615F0:5432","path":"AssistantBackendStack/ProcessingSecurityGroup/from AssistantBackendStackAgentDBSecurityGroup622615F0:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow outbound traffic to RDS from SageMaker jobs","fromPort":5432,"groupId":{"Fn::GetAtt":["ProcessingSecurityGroup5BDF13BE","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["AgentDBSecurityGroupB03CC0F7","GroupId"]},"toPort":5432}}}}},"ProcessingSecurityGroupIdParameter":{"id":"ProcessingSecurityGroupIdParameter","path":"AssistantBackendStack/ProcessingSecurityGroupIdParameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/ProcessingSecurityGroupIdParameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/AgenticLLMAssistant/SMProcessingJobSecurityGroupId","type":"String","value":{"Fn::GetAtt":["ProcessingSecurityGroup5BDF13BE","GroupId"]}}}}}},"DBSecretArnParameter":{"id":"DBSecretArnParameter","path":"AssistantBackendStack/DBSecretArnParameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/DBSecretArnParameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/AgenticLLMAssistant/DBSecretARN","type":"String","value":{"Ref":"AgentDBSecretAttachment8C6DB88D"}}}}}},"SubnetIdsParameter":{"id":"SubnetIdsParameter","path":"AssistantBackendStack/SubnetIdsParameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/SubnetIdsParameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/AgenticLLMAssistant/SubnetIds","type":"String","value":{"Fn::Join":["",["[\"",{"Ref":"VpcVPCpublicSubnet1SubnetA91B7DBE"},"\",\"",{"Ref":"VpcVPCpublicSubnet2SubnetC9D5B981"},"\"]"]]}}}}}},"ChatHistoryTable":{"id":"ChatHistoryTable","path":"AssistantBackendStack/ChatHistoryTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/ChatHistoryTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"SessionId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"SessionId","keyType":"HASH"}],"tableClass":"STANDARD_INFREQUENT_ACCESS"}}},"ScalingRole":{"id":"ScalingRole","path":"AssistantBackendStack/ChatHistoryTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}}}},"LambdaAgentContainer":{"id":"LambdaAgentContainer","path":"AssistantBackendStack/LambdaAgentContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.DockerImageFunction","version":"2.212.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AssistantBackendStack/LambdaAgentContainer/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.212.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AssistantBackendStack/LambdaAgentContainer/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"Resource":{"id":"Resource","path":"AssistantBackendStack/LambdaAgentContainer/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AssistantBackendStack/LambdaAgentContainer/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/LambdaAgentContainer/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ssm:DescribeParameters","ssm:GetParameter","ssm:GetParameterHistory","ssm:GetParameters"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:ssm:us-east-1:758164713735:parameter",{"Ref":"ssmBedrockRegionParameter3898168F"}]]},{"Fn::Join":["",["arn:aws:ssm:us-east-1:758164713735:parameter",{"Ref":"ssmLLMModelIDParameterA0CC5D29"}]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ChatHistoryTableA22BA13C","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Ref":"AgentDBSecretAttachment8C6DB88D"}},{"Action":["bedrock:InvokeModel","bedrock:InvokeModelWithResponseStream"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LambdaAgentContainerServiceRoleDefaultPolicy5AE9F6AD","roles":[{"Ref":"LambdaAgentContainerServiceRoleC3F44F71"}]}}}}}}},"AssetImage":{"id":"AssetImage","path":"AssistantBackendStack/LambdaAgentContainer/AssetImage","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.212.0"},"children":{"Staging":{"id":"Staging","path":"AssistantBackendStack/LambdaAgentContainer/AssetImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.212.0"}},"Repository":{"id":"Repository","path":"AssistantBackendStack/LambdaAgentContainer/AssetImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.212.0","metadata":[]}}}},"SecurityGroup":{"id":"SecurityGroup","path":"AssistantBackendStack/LambdaAgentContainer/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/LambdaAgentContainer/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatic security group for Lambda Function AssistantBackendStackLambdaAgentContainer76778261","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"VpcVPC8B8C4E4B"}}}}}},"Resource":{"id":"Resource","path":"AssistantBackendStack/LambdaAgentContainer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"imageUri":{"Fn::Sub":"758164713735.dkr.ecr.us-east-1.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-758164713735-us-east-1:fe04b14605578261bfefa7b5a8b63d1011c97f9d200089945e06cec0c93d9b39"}},"description":"Lambda function with bedrock access created via CDK","environment":{"variables":{"BEDROCK_REGION_PARAMETER":{"Ref":"ssmBedrockRegionParameter3898168F"},"LLM_MODEL_ID_PARAMETER":{"Ref":"ssmLLMModelIDParameterA0CC5D29"},"CHAT_MESSAGE_HISTORY_TABLE":{"Ref":"ChatHistoryTableA22BA13C"},"AGENT_DB_SECRET_ID":{"Ref":"AgentDBSecretAttachment8C6DB88D"}}},"memorySize":512,"packageType":"Image","role":{"Fn::GetAtt":["LambdaAgentContainerServiceRoleC3F44F71","Arn"]},"timeout":180,"vpcConfig":{"subnetIds":[{"Ref":"VpcVPCprivateSubnet1Subnet29B9FADC"},{"Ref":"VpcVPCprivateSubnet2Subnet63498DC1"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaAgentContainerSecurityGroup4509E773","GroupId"]}]}}}}}},"AgentLambdaNameParameter":{"id":"AgentLambdaNameParameter","path":"AssistantBackendStack/AgentLambdaNameParameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/AgentLambdaNameParameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/AgenticLLMAssistant/AgentExecutorLambdaNameParameter","type":"String","value":{"Ref":"LambdaAgentContainer328438B0"}}}}}},"AgentDataBucket":{"id":"AgentDataBucket","path":"AssistantBackendStack/AgentDataBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/AgentDataBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}]}}},"Policy":{"id":"Policy","path":"AssistantBackendStack/AgentDataBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/AgentDataBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"AgentDataBucket67AFDFB9"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["AgentDataBucket67AFDFB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AgentDataBucket67AFDFB9","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"AssistantBackendStack/AgentDataBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.212.0","metadata":[]},"children":{"Default":{"id":"Default","path":"AssistantBackendStack/AgentDataBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.212.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"AssistantBackendStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.212.0"},"children":{"Staging":{"id":"Staging","path":"AssistantBackendStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.212.0"}},"Role":{"id":"Role","path":"AssistantBackendStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.212.0"}},"Handler":{"id":"Handler","path":"AssistantBackendStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.212.0"}}}},"AgentDataBucketParameter":{"id":"AgentDataBucketParameter","path":"AssistantBackendStack/AgentDataBucketParameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/AgentDataBucketParameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/AgenticLLMAssistant/AgentDataBucketParameter","type":"String","value":{"Ref":"AgentDataBucket67AFDFB9"}}}}}},"sageMakerPostgresDBAccessIAMPolicy":{"id":"sageMakerPostgresDBAccessIAMPolicy","path":"AssistantBackendStack/sageMakerPostgresDBAccessIAMPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.ManagedPolicy","version":"2.212.0","metadata":[]},"children":{"ImportedsageMakerPostgresDBAccessIAMPolicy":{"id":"ImportedsageMakerPostgresDBAccessIAMPolicy","path":"AssistantBackendStack/sageMakerPostgresDBAccessIAMPolicy/ImportedsageMakerPostgresDBAccessIAMPolicy","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"Resource":{"id":"Resource","path":"AssistantBackendStack/sageMakerPostgresDBAccessIAMPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnManagedPolicy","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::ManagedPolicy","aws:cdk:cloudformation:props":{"description":"","path":"/","policyDocument":{"Statement":[{"Action":"ssm:GetParameter","Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:ssm:us-east-1:758164713735:parameter",{"Ref":"AgentDataBucketParameter5D00B641"}]]},{"Fn::Join":["",["arn:aws:ssm:us-east-1:758164713735:parameter",{"Ref":"AgentLambdaNameParameterC57B8D37"}]]},{"Fn::Join":["",["arn:aws:ssm:us-east-1:758164713735:parameter",{"Ref":"DBSecretArnParameter9F1292D2"}]]},{"Fn::Join":["",["arn:aws:ssm:us-east-1:758164713735:parameter",{"Ref":"ProcessingSecurityGroupIdParameterC17E9A83"}]]},{"Fn::Join":["",["arn:aws:ssm:us-east-1:758164713735:parameter",{"Ref":"SubnetIdsParameter36D6DB6E"}]]},{"Fn::Join":["",["arn:aws:ssm:us-east-1:758164713735:parameter",{"Ref":"ssmBedrockRegionParameter3898168F"}]]},{"Fn::Join":["",["arn:aws:ssm:us-east-1:758164713735:parameter",{"Ref":"ssmLLMModelIDParameterA0CC5D29"}]]}]},{"Action":"secretsmanager:GetSecretValue","Effect":"Allow","Resource":{"Ref":"AgentDBSecretAttachment8C6DB88D"}},{"Action":["s3:DeleteObject","s3:GetObject","s3:ListBucket","s3:PutObject"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["AgentDataBucket67AFDFB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AgentDataBucket67AFDFB9","Arn"]},"/*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":{"Fn::GetAtt":["LambdaAgentContainer328438B0","Arn"]}}],"Version":"2012-10-17"}}}}}},"CognitoPool":{"id":"CognitoPool","path":"AssistantBackendStack/CognitoPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/CognitoPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_phone_number","priority":1},{"name":"verified_email","priority":2}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"aliasAttributes":["email"],"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","schema":[{"name":"email","mutable":false,"required":true}],"smsVerificationMessage":"The verification code to your new account is {####}","usernameConfiguration":{"caseSensitive":false},"verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"NextJsAppClient":{"id":"NextJsAppClient","path":"AssistantBackendStack/CognitoPool/NextJsAppClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/CognitoPool/NextJsAppClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"allowedOAuthFlows":["code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["openid"],"callbackUrLs":["https://localhost:3000/"],"logoutUrLs":["https://localhost:3000/"],"supportedIdentityProviders":["COGNITO"],"userPoolId":{"Ref":"CognitoPool2F2E48AB"}}}}}}}},"AssistantApi":{"id":"AssistantApi","path":"AssistantBackendStack/AssistantApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/AssistantApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"An API to invoke an LLM based agent which orchestrates using tools to answer user input questions.","name":"assistant-api"}}},"Deployment":{"id":"Deployment","path":"AssistantBackendStack/AssistantApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/AssistantApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"An API to invoke an LLM based agent which orchestrates using tools to answer user input questions.","restApiId":{"Ref":"AssistantApi31301AC3"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"AssistantBackendStack/AssistantApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/AssistantApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"AssistantApiDeployment915E64390944af336d6fb760b41e0efb48f6a875"},"restApiId":{"Ref":"AssistantApi31301AC3"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"AssistantBackendStack/AssistantApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.212.0"}},"Default":{"id":"Default","path":"AssistantBackendStack/AssistantApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.212.0","metadata":[]},"children":{"OPTIONS":{"id":"OPTIONS","path":"AssistantBackendStack/AssistantApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/AssistantApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["AssistantApi31301AC3","RootResourceId"]},"restApiId":{"Ref":"AssistantApi31301AC3"}}}}}},"POST":{"id":"POST","path":"AssistantBackendStack/AssistantApi/Default/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.212.0","metadata":[]},"children":{"ApiPermission.AssistantBackendStackAssistantApi1FDD658E.POST..":{"id":"ApiPermission.AssistantBackendStackAssistantApi1FDD658E.POST..","path":"AssistantBackendStack/AssistantApi/Default/POST/ApiPermission.AssistantBackendStackAssistantApi1FDD658E.POST..","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaAgentContainer328438B0","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:758164713735:",{"Ref":"AssistantApi31301AC3"},"/",{"Ref":"AssistantApiDeploymentStageprodD980B56D"},"/POST/"]]}}}},"ApiPermission.Test.AssistantBackendStackAssistantApi1FDD658E.POST..":{"id":"ApiPermission.Test.AssistantBackendStackAssistantApi1FDD658E.POST..","path":"AssistantBackendStack/AssistantApi/Default/POST/ApiPermission.Test.AssistantBackendStackAssistantApi1FDD658E.POST..","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaAgentContainer328438B0","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:758164713735:",{"Ref":"AssistantApi31301AC3"},"/test-invoke-stage/POST/"]]}}}},"Resource":{"id":"Resource","path":"AssistantBackendStack/AssistantApi/Default/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"ChatAuthorizer3005753F"},"httpMethod":"POST","integration":{"type":"AWS","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["LambdaAgentContainer328438B0","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["AssistantApi31301AC3","RootResourceId"]},"restApiId":{"Ref":"AssistantApi31301AC3"}}}}}}}}}},"ChatAuthorizer":{"id":"ChatAuthorizer","path":"AssistantBackendStack/ChatAuthorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CognitoUserPoolsAuthorizer","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/ChatAuthorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAuthorizer","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Authorizer","aws:cdk:cloudformation:props":{"identitySource":"method.request.header.Authorization","name":"AssistantBackendStackChatAuthorizer4DCE3EAB","providerArns":[{"Fn::GetAtt":["CognitoPool2F2E48AB","Arn"]}],"restApiId":{"Ref":"AssistantApi31301AC3"},"type":"COGNITO_USER_POOLS"}}}}},"cognitoUserPoolParameter":{"id":"cognitoUserPoolParameter","path":"AssistantBackendStack/cognitoUserPoolParameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/cognitoUserPoolParameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/AgenticLLMAssistant/cognito_user_pool_id","type":"String","value":{"Ref":"CognitoPool2F2E48AB"}}}}}},"cognitoUserPoolClientParameter":{"id":"cognitoUserPoolClientParameter","path":"AssistantBackendStack/cognitoUserPoolClientParameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/cognitoUserPoolClientParameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/AgenticLLMAssistant/cognito_user_pool_client_id","type":"String","value":{"Ref":"CognitoPoolNextJsAppClient17034EED"}}}}}},"AgentAPIURLParameter":{"id":"AgentAPIURLParameter","path":"AssistantBackendStack/AgentAPIURLParameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AssistantBackendStack/AgentAPIURLParameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/AgenticLLMAssistant/agent_api","type":"String","value":{"Fn::Join":["",["https://",{"Ref":"AssistantApi31301AC3"},".execute-api.us-east-1.",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"AssistantApiDeploymentStageprodD980B56D"},"/"]]}}}}}},"sageMakerPostgresDBAccessIAMPolicyARN":{"id":"sageMakerPostgresDBAccessIAMPolicyARN","path":"AssistantBackendStack/sageMakerPostgresDBAccessIAMPolicyARN","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.212.0"}},"UserPoolClient":{"id":"UserPoolClient","path":"AssistantBackendStack/UserPoolClient","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.212.0"}},"UserPoolId":{"id":"UserPoolId","path":"AssistantBackendStack/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.212.0"}},"UserPoolProviderURL":{"id":"UserPoolProviderURL","path":"AssistantBackendStack/UserPoolProviderURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.212.0"}},"EndpointURL":{"id":"EndpointURL","path":"AssistantBackendStack/EndpointURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.212.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"AssistantBackendStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.2.69"},"children":{"Default":{"id":"Default","path":"AssistantBackendStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.212.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"AssistantBackendStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.212.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"AssistantBackendStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.212.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.2.69"}}}}}